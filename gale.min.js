!function(){function e(e){return this.identifier=e||"translateid",this.previousLanguage=null,this.currentLanguage=null,this.translationSourceLoaded=!1,this.translationRawSource=null,this.translationSource=null,this.inverseTranslationSource=null,this.translationMeta=null,this.availableLanguages=null,this.caching=!0,this.elementCache=[],this.translateFromCache=!0,this.debug=!0,this}e.prototype.loadSourceFromJSON=function(e,t){var a=this;a._processSource(e,t)},e.prototype.loadSourceFromObject=function(e,t){var a=this;a._processSource(e,t)},e.prototype.translateApp=function(e,t){var a=this,n=!1;if(!a.translationSourceLoaded)throw new Error("Could not translate, translation source is not loaded!");if(-1===Object.keys(a.translationSource).indexOf(e))throw new Error("Could not translate, supplied language not found in source");if(t&&a.elementCache.length>0){console.log("Translating cached elements (translateFromCache = "+t+"; elementCacheLength = "+a.elementCache.length+")"),a.debug&&console.time("Cached element translate time");for(var o in a.elementCache){var r=a.elementCache[o];if("undefined"==typeof r.data(a.identifier)||!r.data(a.identifier)||$.isEmptyObject(r.data(a.identifier)))return void(a.debug&&console.log("Skipped "+r[0].tagName));a._translateElement(r,e),a.debug&&console.log(r.data(a.identifier))}a.debug&&console.timeEnd("Cached element translate time"),n=!0}else console.log("Translating and caching noncached elements (caching = "+t+")"),a.debug&&console.time("Noncached element translate time"),$("*").each(function(){var t=$(this);return"undefined"==typeof t.data(a.identifier)||!t.data(a.identifier)||$.isEmptyObject(t.data(a.identifier))?void(a.debug&&console.log("Skipped "+t[0].tagName)):(a.caching&&(a._inElementCache(t)||a.elementCache.push(t)),a._translateElement(t,e),void(a.debug&&console.log(t.data(a.identifier))))}),a.debug&&console.timeEnd("Noncached element translate time"),n=!0;n&&(a.previousLanguage&&(a.previousLanguage=a.currentLanguage),a.currentLanguage=e,a.previousLanguage||(a.previousLanguage=a.currentLanguage))},e.prototype.getTranslationsById=function(e){var t=this,a={};if(!t.translationSourceLoaded)throw new Error("Could not get translation by id, translation source not loaded");for(var n in t.translationSource){var o=t.translationSource[n];for(var r in o){var i=o[r];r===e&&(a[n]=i)}}return a},e.prototype.reverseTranslationLookup=function(e){var t=this,a={},n=!1,o=null;if(!t.translationSourceLoaded)throw new Error("Could not perform reverse translation lookup, translation source not loaded");for(var r in t.translationSource){var i=t.translationSource[r];for(var l in i){var s=i[l];if(s===e){o=l,n=!0;break}}if(n)break}if(n){for(var r in t.translationSource){var i=t.translationSource[r];for(var l in i){var s=i[l];l===o&&(a[r]=s)}}return a}return{}},e.prototype._processSource=function(e,t){var a=this;if(a.translationSourceLoaded=!1,null!==e)if("object"==typeof e)console.log("obbbjj"),a._processSourceCallback(e,t);else{if("string"!=typeof e)throw new Error("Could not determine translation source type");console.log("jason"),$.getJSON(e,function(e){a._processSourceCallback(e,t)}).fail(function(){throw a.translationSourceLoaded=!1,new Error("Failed to load translation source from JSON")})}},e.prototype._processSourceCallback=function(e,t){var a=this;if(!(e&&e.meta&&e.translations))throw a.translationSourceLoaded=!1,new Error("Translation source cannot be null and / or it must include meta and data objects");if(a.translationRawSource=e,a.translationMeta=e.meta,!e.meta.availableLanguages)throw new Error("Meta 'availableLanguages' not found in translation source!");console.log("Meta 'availableLanguages' found for translation source"),a.availableLanguages=e.meta.availableLanguages,a.translationMeta.availableLanguagesCount=Object.keys(e.meta.availableLanguages).length,a.translationSource=e.translations,a.inverseTranslationSource=a._invertSource(),a.translationSourceLoaded=!0,t.call(a)},e.prototype._translateElement=function(e,t){var a=this,n=e,o=a.translationSource[t];"undefined"!=typeof o[n.data(a.identifier)]&&o[n.data(a.identifier)]||console.log("'"+t+"' Translation not found for id '"+n.data(a.identifier)+"'"),n.is('input[type="button"], input[type="submit"]')?(a.debug&&console.log("Translated element = BUTTON INPUT"),n.attr("value",o[n.data(a.identifier)])):n.is('input[type="text"], input[type="password"], input[type="textarea"], input[type="textbox"]')?(a.debug&&console.log("Translated element = TEXT INPUT"),n.attr("placeholder",o[n.data(a.identifier)])):n.html(o[n.data(a.identifier)])},e.prototype._inElementCache=function(e){var t=this;for(var a in t.elementCache)if(t.elementCache[a].is(e))return!0;return!1},e.prototype._invertSource=function(){var e=this,t={};for(var a in e.translationSource){var n=e.translationSource[a];t[a]={};var o=t[a];for(var r in n)o[n[r]]=r}return t},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.Gale=e}();